<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Fleet Management</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		/>
		<style>
			/* Custom styles for a modern look */
            body {
                font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
                background-color: #f0f2f5; /* Light gray background */
            }
            .main-container {
                display: flex;
                flex: 1;
            }
            .sidebar {
                width: 280px;
                background: linear-gradient(to bottom, #343a40, #212529); /* Darker gradient for sidebar */
                color: #f8f9fa;
                box-shadow: 2px 0 5px rgba(0,0,0,0.1);
                display: flex; /* Use flexbox for sidebar content */
                flex-direction: column; /* Arrange items vertically */
                height: 100vh; /* Make sidebar full height */
                position: sticky; /* Make sidebar sticky */
                top: 0; /* Stick to the top */
            }
            .sidebar .list-unstyled {
                flex-grow: 1; /* Allow the list to grow and take available space */
                overflow-y: auto; /* Add scroll if content overflows */
            }
            .sidebar a {
                color: #f8f9fa;
                transition: all 0.3s ease;
            }
            .sidebar a:hover {
                color: #ffffff;
                background-color: rgba(255,255,255,0.1);
            }
            .topbar {
                background-color: #ffffff; /* White topbar */
                border-bottom: 1px solid #e0e0e0;
                box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                display: flex; /* Use flexbox for topbar content */
                justify-content: space-between; /* Space out items */
                align-items: center; /* Center items vertically */
                padding: 10px 20px; /* Add padding */
            }
            .content {
                flex: 1;
                padding: 20px;
            }
            .card {
                border-radius: 0.75rem; /* Rounded corners for cards */
                border: none;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            }
            .card-header {
                border-top-left-radius: 0.75rem;
                border-top-right-radius: 0.75rem;
                background-color: #007bff; /* Primary color for card headers */
                color: white;
            }
            .btn-primary {
                background-color: #007bff;
                border-color: #007bff;
                transition: all 0.3s ease;
            }
            .btn-primary:hover {
                background-color: #0056b3;
                border-color: #0056b3;
            }
            .btn-success {
                background-color: #28a745;
                border-color: #28a745;
                transition: all 0.3s ease;
            }
            .btn-success:hover {
                background-color: #1e7e34;
                border-color: #1e7e34;
            }
            .form-control:focus {
                border-color: #007bff;
                box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25);
            }
            .table thead th {
                background-color: #e9ecef;
                color: #495057;
                border-bottom: 2px solid #dee2e6;
            }
            .table tbody tr:hover {
                background-color: #f5f5f5;
            }
            .pagination .page-link {
                color: #007bff;
            }
            .pagination .page-item.active .page-link {
                background-color: #007bff;
                border-color: #007bff;
            }
            .pagination .page-item.active .page-link:hover {
                background-color: #0056b3;
                border-color: #0056b3;
            }
            .pagination .page-link:hover {
                color: #0056b3;
            }
		</style>
	</head>
	<body>
		<div class="main-container">
			<div class="sidebar p-3">
				<a
					href="/"
					class="d-flex align-items-center pb-3 mb-3 link-dark text-decoration-none border-bottom"
				>
					<span class="fs-5 fw-semibold">Fleet Management</span>
				</a>
				<ul class="list-unstyled ps-0">
					<li class="mb-1">
						<a
							href="/"
							class="btn btn-toggle align-items-center rounded collapsed"
						>
							Home
						</a>
					</li>
					<% if (currentUser && currentUser.role === 'ADMIN') { %>
					<li class="mb-1">
						<a
							href="/bookings"
							class="btn btn-toggle align-items-center rounded collapsed"
						>
							Bookings
						</a>
					</li>
					<li class="mb-1">
						<a
							href="/vehicles"
							class="btn btn-toggle align-items-center rounded collapsed"
						>
							Vehicles
						</a>
					</li>
					<li class="mb-1">
						<a
							href="/drivers"
							class="btn btn-toggle align-items-center rounded collapsed"
						>
							Drivers
						</a>
					</li>
				
					<% } else if (currentUser && currentUser.role === 'APPROVER') { %>
					<li class="mb-1">
						<a
							href="/users"
							class="btn btn-toggle align-items-center rounded collapsed"
						>
							Users
						</a>
					</li>
					<li class="mb-1">
						<a
							href="/approvals"
							class="btn btn-toggle align-items-center rounded collapsed"
						>
							Approvals
						</a>
					</li>
					<li class="mb-1">
						<a
							href="/bookings"
							class="btn btn-toggle align-items-center rounded collapsed"
						>
							Bookings
						</a>
					</li>
					<% } %>
				</ul>
			</div>
			<div class="flex-grow-1">
				<div class="topbar">
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb mb-0">
							<li class="breadcrumb-item">
								<a href="/">Home</a>
							</li>
							<% if (currentUser) { %>
							<li
								class="breadcrumb-item active"
								aria-current="page"
							>
								<%= currentUser.role %>
							</li>
							<% } %>
						</ol>
					</nav>
					<% if (currentUser) { %>
					<a href="/logout" class="btn btn-sm btn-outline-secondary ms-auto">
						Logout (<%= currentUser.username %>)
					</a>
					<% } %>
				</div>
				<div class="content"><%- body %></div>
			</div>
			<div class="toast-container position-fixed bottom-0 end-0 p-3">
			<% if (success && success.length) { %>
			<div
				class="toast align-items-center text-white bg-success border-0"
				role="alert"
				aria-live="assertive"
				aria-atomic="true"
			>
				<div class="d-flex">
					<div class="toast-body"><%= success %></div>
					<button
						type="button"
						class="btn-close btn-close-white me-2 m-auto"
						data-bs-dismiss="toast"
						aria-label="Close"
					></button>
				</div>
			</div>
			<% } %> <% if (error && error.length) { %>
			<div
				class="toast align-items-center text-white bg-danger border-0"
				role="alert"
				aria-live="assertive"
				aria-atomic="true"
			>
				<div class="d-flex">
					<div class="toast-body"><%= error %></div>
					<button
						type="button"
						class="btn-close btn-close-white me-2 m-auto"
						data-bs-dismiss="toast"
						aria-label="Close"
					></button>
				</div>
			</div>
			<% } %>
		</div>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
			crossorigin="anonymous"
		></script>
		<script>
			const toastElList = document.querySelectorAll(".toast");
			const toastList = [...toastElList].map(
				(toastEl) => new bootstrap.Toast(toastEl, { delay: 5000 }),
			);
			toastList.forEach((toast) => toast.show());
		</script>
	</body>
</html>